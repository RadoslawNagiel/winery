<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons class="absolute top-1 left-0" slot="start">
      <ion-back-button
        (click)="backClick()"
        text=""
        icon="arrow-back-outline"
      ></ion-back-button>
    </ion-buttons>
    <ion-title> Wino </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="standard-frame">
    <div class="flex">
      <div class="flex pr-3">
        <img class="w-4" src="assets/icons/wine.svg" />
        <img class="w-5" src="assets/icons/wine.svg" />
        <img class="w-4" src="assets/icons/wine.svg" />
      </div>
      <div class="pl-2 w-full">
        <div class="header-text flex justify-between">
          <span>{{ wine.name }}</span>
          <span>{{ wine.createDate | date: "yyyy" }}</span>
        </div>
        <hr class="my-1" />
        <div>{{ Sweetness[wine.sweetness] }},&nbsp;{{ wine.power }}%</div>
      </div>
    </div>
    <div class="flex">
      <div class="header-text py-1 pr-2">Liczba butelek</div>
      <div class="relative w-1/3">
        <ion-input
          class="text-center"
          type="number"
          [(ngModel)]="wine.numberOfBottles"
          (change)="changeAmount()"
        ></ion-input>
        <div
          class="absolute top-2 left-1 circle-button-small z-50"
          (click)="minusClick()"
        >
          -
        </div>
        <div
          class="absolute top-2 right-1 circle-button-small z-50"
          (click)="plusClick()"
        >
          +
        </div>
      </div>
    </div>

    <div class="header-text py-1">Drożdże</div>
    <div class="pl-2">{{ wine.yeast }}</div>
    <div class="header-text py-1">Składniki</div>
    <div
      class="pl-2 items-center"
      *ngFor="let ingredient of wine.recipe.ingredients"
    >
      - {{ ingredient.name }}:
      <ng-container *ngIf="ingredient.name === 'cukier'; else noSugar">
        {{ getSugarValue() }}
      </ng-container>
      <ng-template #noSugar>
        {{ (ingredient.value * wine.capacity) / 10 }}
      </ng-template>
      {{ ingredient.unit }}
    </div>

    <div class="header-text py-1">Etapy produkcji</div>
    <div
      class="pl-2 items-center stages-container"
      *ngFor="let stage of wine.recipe.productStages; index as i"
    >
      <div class="pl-1">
        {{ stage.date + wine.createDate | date: "dd.MM.yyyy" }}
      </div>
      <div class="pl-1">{{ stage.name }}</div>
    </div>
  </div>
</ion-content>
